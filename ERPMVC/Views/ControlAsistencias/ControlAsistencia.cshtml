

@using Kendo.Mvc.UI
@{
    ViewData["Title"] = "Control Aistencias";

    var ElementoConfiguracion = ViewData["ElementoConfiguracion"] as IEnumerable<ERPMVC.Models.ElementoConfiguracion>;
}


<script>

    function onsave(e) {
        //   console.log(new Date(e.model.FechaRecepcion).toISOString());
        // e.model.set('FechaRecepcion', new Date(e.model.FechaRecepcion).toISOString());
    }

    function EditControlAsistencias(e) {
        console.log(1234567)
        e.preventDefault();
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        var dataObject = {
            Id: dataItem.Id,
            editar: 0
        };


    }

    function RefrescarGrid() {

        var grid = $("#gridControlAsistencia").getKendoGrid();
        grid.dataSource.read();

    }


</script>

<h3 class="text-themecolor">Control Asistencias</h3>
<div class="">
    <h4 style="margin-top: 2em;">Seleccionar Mes:</h4>

    @(Html.Kendo().DatePicker()
                                  .Name("monthpicker")
                                  .Start(CalendarView.Year)
                                  .Depth(CalendarView.Year)
                                  .Format("MMMM yyyy")
                                  .Value("")
                                  .DateInput()
                                  .HtmlAttributes(new { style = "width: 100%", title = "monthpicker" })                                  
                                  .Events(e => e.Change("monthpicker_change"))

    )
    

</div>

<script>
    function ConsultarAsistencias(e) {
        console.log("Entre")
               // var notification = $("#notification").data("kendoNotification");
        var displayedData1 = $("#monthpicker").getKendoDatePicker().value().toJSON()
        console.log(displayedData1)

        var stringVal = displayedData1.toString();

        console.log(stringVal + " String")

        var dates = displayedData1.split("-");

        //var fin = stringVal.substring(0, 9).toString();

        function additionalInfo() {
            return {
                name: "test",
                id: 2
            }
        }


        var p1 = dates[0];
        var p2 = dates[1];
        var p3 = dates[2];
        console.log("_____________________________________")
        var primero = (p1 + "-" + p2 + "-" + "01").toString();




        console.log(primero)
        console.log(fin)

				//var dataObject = {
                    
    //                '_Data': displayedData1
				//};

       // console(dataObject)

               // var validator = $("#frmEmployees").data("kendoValidator");
                //if (validator.validate()) {


                    $.ajax({
                        url: '@Url.Action("GetGetControlAsistencias", "ControlAsistencias")',
                        method: 'GET',
                        datatype: "json",
                        contentType: 'application/json',
                        async: false,
                        data: { 'primero': primero, 'actual': stringVal},
                        success: function (data) {
							$.toast({
                                heading: 'Satisfactorio',
                                text: '<br/><br/> Consultando Asistencias.',
                                position: 'top-right',
                                loaderBg: '#ff6849',
                                icon: 'success',
                                hideAfter: 30000,
                                stack: 6
                            });
							//RefrescarGrid();
                            //$('#ModalEmployees').modal('hide');
                        },
                        //error: function (XMLHttpRequest, textStatus, errorThrown) {
                        //    notification.show({ 
                        //       // title: "Validación",
                        //        message: textStatus + ": " + XMLHttpRequest.responseText
                        //    }, "error");
                        //}
                    });
               //}
                //else {
                //    $("#btnEmployees").prop("disabled", false);
                //}
    }


</script>




<script>

    //var f = new Date();
    //document.write(f.getDate() + "/" + (f.getMonth() + 1) + "/" + f.getFullYear());


    function monthpicker_change() {

         console.log("Entre")
               // var notification = $("#notification").data("kendoNotification");
        var displayedData1 = $("#monthpicker").getKendoDatePicker().value().toJSON()
        console.log(displayedData1)

        var stringVal = displayedData1.toString();
        //var hoy = new Date();
        //var dd = hoy.getDate();
        //var mm = hoy.getMonth()+1;
        //var yyyy = hoy.getFullYear();

        //var hoyy = dd+"-"+mm+"-"+yyyy;
        //if(displayedData1 > hoyy){
        //    console.log("no puedes no existe")
        //}


        console.log(stringVal + " String")

        var dates = displayedData1.split("-");

        //var fin = stringVal.substring(0, 9).toString();      

        var p1 = dates[0];
        var p2 = dates[1];
        var p3 = dates[2];
        console.log("_____________________________________")
        var primero = (p1 + "-" + p2 + "-" + "01").toString();
        console.log(primero)    

       
         

        var _UltimoMes = new Date(p1, p2, 0).getDate(); //new displayedData1(displayedData1.getFullYear(), displayedData1.getMonth() + 1, 0);
        console.log(_UltimoMes + "Ultimo de mes")



        var dataObject = {
            
        };
       

       

        $.ajax({
            url: '@Url.Action("GetGetControlAsistencias", "ControlAsistencias")',
            method: 'GET',
            datatype: "json",
            contentType: 'application/json',
            async: false,
            data: { 'primero': primero, 'actual': stringVal},
                                success: function (data) {
                                    var grid = $("#gridControlAsistencia").getKendoGrid();
                                    var datasource = grid.dataSource;
                                    var raw = datasource._data;
                                    for (i = datasource._data.length - 1; i >= 0; i--) {
                                        var item = raw[i];
                                        datasource.remove(item);
                                    }

                                    for (var i = 0; i < data.Data.length; i++) {
                                    
                                       
                                        datasource.insert(data.Data[i]);

                                        
                                        console.log(data.Data[1])    

                                    }

                                    var gridCertificadoDeposito = $("#gridControlAsistencia").data().kendoGrid.dataSource.data();
                                    //console.log('Listado Certificado: ' + gridCertificadoDeposito.length);
                                    if (gridCertificadoDeposito.length > 0) {
                                        //$("#myModalCertificate").modal('show');
                                        var grids = $("#gridControlAsistencia").data("kendoGrid");                                     

                                        if (_UltimoMes == 28) {
                                            grids.hideColumn(2);
                                            grids.hideColumn(3);
                                            grids.hideColumn(32);
                                            grids.hideColumn(33);
                                            grids.hideColumn(34);

                                        } else if (_UltimoMes == 29) {
                                            grids.hideColumn(2);
                                            grids.hideColumn(3);
                                            grids.hideColumn(33);
                                            grids.hideColumn(34);

                                        } else if (_UltimoMes = 30) {
                                            grids.hideColumn(2);
                                            grids.hideColumn(3);
                                            grids.hideColumn(34);
                                            

                                        } else if (_UltimoMes = 31) {
                                            grids.hideColumn(2);
                                            grids.hideColumn(3);
                                           
                                        }

                                        // $("#gridControlAsistencia").data("kendoGrid").options.columns[2].hidden = true;
                                    }
                                    else {
                                        //$("#myModalCertificate").modal('hide');
                                    }

                                },
                                //error: function (XMLHttpRequest, textStatus, errorThrown) {

                                //    notification.show({
                                //        title: "Validación",
                                //        message: textStatus + ": " + XMLHttpRequest.responseText
                                //    }, "error");

                                //}
                            });

    }

                 
               
    


    function RefrescarGrid() {

        var grid = $("#gridControlAsistencia").getKendoGrid();
        grid.dataSource.read();

    }

    //    var datepicker = $("#monthpicker").data("kendoDatePicker");
    //    var value = datepicker.value();
    //    var fecha = kendo.toString(value, "MMMM yyyy ");


    //    console.log(fecha)




    //    var str = fecha;
    //    var date = str.split(" ");

    //    var Mes = date[0];
    //    var Año = date[1];

    //    var MesNum = 0;

    //    if (Mes)

    //        //var res = str.split(" ", 1);
    //        //var res2 = str.split(" ", 2);
    //        console.log(date)
    //    console.log(Año)
    //    console.log(Mes)
    //    if (Mes == "enero") {
    //        MesNum = 1;
    //    }
    //    else if (Mes == "febrero") {
    //        MesNum = 2;
    //    }
    //    else if (Mes == "marzo") {
    //        MesNum = 3;
    //    }
    //    else if (Mes == "abril") {
    //        MesNum = 4;
    //    }
    //    else if (Mes == "mayo") {
    //        MesNum = 5;
    //    }
    //    else if (Mes == "junio") {
    //        MesNum = 6;
    //    }
    //    else if (Mes == "julio") {
    //        MesNum = 7;
    //    }
    //    else if (Mes == "agosto") {
    //        MesNum = 8;
    //    }
    //    else if (Mes == "septiembre") {
    //        MesNum = 9;
    //    }
    //    else if (Mes == "octubre") {
    //        MesNum = 10;
    //    }
    //    else if (Mes == "noviembre") {
    //        MesNum = 11;
    //    }
    //    else if (Mes == "diciembre") {
    //        MesNum = 12;
    //    };

    //    console.log(MesNum);



    //}






</script>







<br />

@(Html.Kendo().Grid<ERPMVC.DTO.ControlAsistenciasDTO>
                                ()
                                .Name("gridControlAsistencia")
                                .Columns(columns =>
                                {

                                    columns.Command(command =>
                                    {

                                        //command.Custom("Ver detalles").Click("Detalles");
                                        //command.Custom("Editar").Click("EditControlAsistencias");
                                        command.Edit().Text("").IconClass("fa fa-edit").UpdateText("").IconClass("fa fa-up").CancelText("").IconClass("fa fa-edit");
                                        //command.Destroy().Text("Eliminar");
                                    }).Locked(true).Lockable(false).Width(200);
                                    columns.Bound(p => p.EmployeesId).Width(100);

                                    columns.Bound(p => p.Empleado.IdEmpleado).Width(150); 
                                    //columns.ForeignKey()
                                    columns.Bound(p => p.Empleado.NombreEmpleado).Locked(true).Lockable(false).Width(150);
                                    columns.ForeignKey(p => p.Dia1TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("1").Width(100);
                                    
                                    columns.Bound(p => p.LetraD1).Width(150);
                                    columns.ForeignKey(p => p.Dia2TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("2").Width(100);
                                    columns.Bound(p => p.LetraD2).Width(150);
                                    columns.ForeignKey(p => p.Dia3TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("3").Width(100);
                                    columns.Bound(p => p.LetraD3).Width(150);
                                    columns.ForeignKey(p => p.Dia4TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("4").Width(100);
                                    columns.Bound(p => p.LetraD4).Width(150);
                                    columns.ForeignKey(p => p.Dia5TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("5").Width(100);
                                    columns.Bound(p => p.LetraD5).Width(150);
                                    columns.ForeignKey(p => p.Dia6TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("6").Width(100);
                                    columns.Bound(p => p.LetraD6).Width(150);
                                    columns.ForeignKey(p => p.Dia7TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("7").Width(100);
                                    columns.Bound(p => p.LetraD7).Width(150);
                                    columns.ForeignKey(p => p.Dia8TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("8").Width(100);
                                    columns.Bound(p => p.LetraD8).Width(150);
                                    columns.ForeignKey(p => p.Dia9TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("9").Width(100);
                                    columns.Bound(p => p.LetraD9).Width(150);
                                    columns.ForeignKey(p => p.Dia10TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("10").Width(100);
                                    columns.Bound(p => p.LetraD10).Width(150);
                                    columns.ForeignKey(p => p.Dia11TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("11").Width(100);
                                    columns.Bound(p => p.LetraD11).Width(150);
                                    columns.ForeignKey(p => p.Dia12TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("12").Width(100);
                                    columns.Bound(p => p.LetraD12).Width(150);
                                    columns.ForeignKey(p => p.Dia13TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("13").Width(100);
                                    columns.Bound(p => p.LetraD13).Width(150);
                                    columns.ForeignKey(p => p.Dia14TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("14").Width(100);
                                    columns.Bound(p => p.LetraD14).Width(150);
                                    columns.ForeignKey(p => p.Dia15TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("15").Width(100);
                                    columns.Bound(p => p.LetraD15).Width(150);
                                    columns.ForeignKey(p => p.Dia16TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("16").Width(100);
                                    columns.Bound(p => p.LetraD16).Width(150);
                                    columns.ForeignKey(p => p.Dia17TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("17").Width(100);
                                    columns.Bound(p => p.LetraD17).Width(150);
                                    columns.ForeignKey(p => p.Dia18TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("18").Width(100);
                                    columns.Bound(p => p.LetraD18).Width(150);
                                    columns.ForeignKey(p => p.Dia19TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("19").Width(100);
                                    columns.Bound(p => p.LetraD19).Width(150);
                                    columns.ForeignKey(p => p.Dia20TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("20").Width(100);
                                    columns.Bound(p => p.LetraD20).Width(150);
                                    columns.ForeignKey(p => p.Dia21TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("21").Width(100);
                                    columns.Bound(p => p.LetraD21).Width(150);
                                    columns.ForeignKey(p => p.Dia22TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("22").Width(100);
                                    columns.Bound(p => p.LetraD22).Width(150);
                                    columns.ForeignKey(p => p.Dia23TA, (System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("23").Width(100);
                                    columns.Bound(p => p.LetraD23).Width(150);
                                    columns.ForeignKey(p => p.Dia24TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("24").Width(100);
                                    columns.Bound(p => p.LetraD24).Width(150);
                                    columns.ForeignKey(p => p.Dia25TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("25").Width(100);
                                    columns.Bound(p => p.LetraD25).Width(150);
                                    columns.ForeignKey(p => p.Dia26TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("26").Width(100);
                                    columns.Bound(p => p.LetraD26).Width(150);
                                    columns.ForeignKey(p => p.Dia27TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("27").Width(100);
                                    columns.Bound(p => p.LetraD27).Width(150);
                                    columns.ForeignKey(p => p.Dia28TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("28").Width(100);
                                    columns.Bound(p => p.LetraD28).Width(150);
                                    columns.ForeignKey(p => p.Dia29TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("29").Width(100);
                                    columns.Bound(p => p.LetraD29).Width(150);
                                    columns.ForeignKey(p => p.Dia30TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("30").Width(100);
                                    columns.Bound(p => p.LetraD30).Width(150);
                                    columns.ForeignKey(p => p.Dia31TA,(System.Collections.IEnumerable)ViewData["ElementoConfiguracion"], "Id", "Valorstring").Title("31").Width(100);
                                    columns.Bound(p => p.LetraD13).Width(150);


                                    //columns.Bound(p => p.Dia1).Title("1").Width(100);
                                    //columns.Bound(p => p.Dia2).Title("2").Width(150);
                                    //columns.Bound(p => p.Dia3).Title("3").Width(150);
                                    //columns.Bound(p => p.Dia4).Title("4").Width(150);
                                    //columns.Bound(p => p.Dia5).Title("5").Width(150);
                                    //columns.Bound(p => p.Dia6).Title("6").Width(150);
                                    //columns.Bound(p => p.Dia7).Title("7").Width(150);
                                    //columns.Bound(p => p.Dia8).Title("8").Width(150);
                                    //columns.Bound(p => p.Dia9).Title("9").Width(150);
                                    //columns.Bound(p => p.Dia11).Title("10").Width(150);
                                    //columns.Bound(p => p.Dia12).Title("11").Width(150);
                                    //columns.Bound(p => p.Dia10).Title("12").Width(150);
                                    //columns.Bound(p => p.Dia13).Title("13").Width(150);
                                    //columns.Bound(p => p.Dia14).Title("14").Width(150);
                                    //columns.Bound(p => p.Dia15).Title("15").Width(150);
                                    //columns.Bound(p => p.Dia16).Title("16").Width(150);
                                    //columns.Bound(p => p.Dia17).Title("17").Width(150);
                                    //columns.Bound(p => p.Dia18).Title("18").Width(150);
                                    //columns.Bound(p => p.Dia19).Title("19").Width(150);
                                    //columns.Bound(p => p.Dia20).Title("20").Width(150);
                                    //columns.Bound(p => p.Dia21).Title("21").Width(150);
                                    //columns.Bound(p => p.Dia22).Title("22").Width(150);
                                    //columns.Bound(p => p.Dia23).Title("23").Width(150);
                                    //columns.Bound(p => p.Dia24).Title("24").Width(150);
                                    //columns.Bound(p => p.Dia25).Title("25").Width(150);
                                    //columns.Bound(p => p.Dia26).Title("26").Width(150);
                                    //columns.Bound(p => p.Dia27).Title("27").Width(150);
                                    //columns.Bound(p => p.Dia28).Title("28").Width(150);
                                    //columns.Bound(p => p.Dia29).Title("29").Width(150);
                                    //columns.Bound(p => p.Dia30).Title("30").Width(150);
                                    //columns.Bound(p => p.Dia31).Title("31").Width(150);
                                    columns.Bound(p => p.LlegadasTarde).Width(150).Title("Llegadas Tarde");
                                    columns.Bound(p => p.DiasLaborales).Width(150).Title("Dias Laborales");
                                    columns.Bound(p => p.PorcentajeLlegadasTarde).Width(150).Title("%Llgadas Tarde");





                                    //columns.Bound(p => p.UsuarioCreacion).Width(230);
                                    //columns.Bound(p => p.UsuarioModificacion).Width(230);
                                    //columns.Bound(p => p.FechaCreacion).Format("{0:dd/MM/yyyy}").Width(190);
                                    //columns.Bound(p => p.FechaModificacion).Format("{0:dd/MM/yyyy}").Width(220);



                                })
                                    .Filterable(f => f.Operators(o => o.ForString(s => s
                                                                   .Clear()
                                                                   .Contains("Contiene")
                                                                   .DoesNotContain("No contiene")
                                                                   .EndsWith("Termina con")
                                                                   .IsEqualTo("Es igual a")
                                                                   .IsNotEqualTo("No es igual a")
                                                                   .IsNull("Es nulo")
                                                                   .StartsWith("Inicia con")


                                                             )
                                                             .ForNumber(n => n
                                                               .Clear()
                                                               .IsEqualTo("Es igual a")
                                                               .IsGreaterThan("Es mayor que")
                                                               .IsLessThan("Es menor que")
                                                               .IsNull("Es nulo")
                                                               .IsLessThanOrEqualTo("Es menor o igual que")
                                                               .IsGreaterThanOrEqualTo("Es mayor o igual que")
                                                             )
                                                             .ForDate(d => d
                                                             .Clear()
                                                             .IsEqualTo("Es igual que")
                                                             .IsGreaterThan("Es mayor que")
                                                             .IsLessThan("Es menor que")
                                                             .IsLessThanOrEqualTo("Es menor o igual que")
                                                             .IsGreaterThanOrEqualTo("Es mayor o igual que")
                                                             .IsNotEqualTo("No es igual que")
                                                              )
                                                           ))
                                .ToolBar(tools =>
                                {
                                    // tools.Create();
                                    //tools.Custom().Text("Agregar").IconClass("k-icon k-i-plus")
                                      //                                                         .HtmlAttributes(new { @class = "k-i-plus-sm", onclick = "AddEstados()" });
                                    tools.Excel().Text("Exportar a excel").HtmlAttributes(new { @class = "toolbar-field" });
                                    tools.Pdf().Text("Exportar a pdf").HtmlAttributes(new { @class = "toolbar-field" });

                                    


                                })
                                .Editable(e => e.Mode(GridEditMode.InLine).ConfirmDelete("¿Esta seguro que desea eliminar este registro?"))
                                .Sortable()
                                .Pageable()
                                .Filterable()
                                .Scrollable()
                                .Pdf(pdf => pdf.FileName("EstadosReport" + DateTime.Now.Year + "_" + DateTime.Now.Month + "_"
                                + DateTime.Now.Day + "_" + DateTime.Now.Hour + "_" + DateTime.Now.Minute + "_" + DateTime.Now.Second + ".pdf")
                                .ProxyURL(Url.Action("Export", "Home")).AllPages())
                                    .Excel(excel => excel.FileName("EstadosReport_" + DateTime.Now.Year + "_" + DateTime.Now.Month + "_"
                                + DateTime.Now.Day + "_" + DateTime.Now.Hour + "_" + DateTime.Now.Minute + "_" + DateTime.Now.Second + ".xlsx").Filterable(true)
                                .ProxyURL(Url.Action("Export", "Home")).AllPages(true))
                                .DataSource(dataSource =>
                                    dataSource
                                    .WebApi()

                                    .ServerOperation(true)
                                    .Model(model =>
                                    {
                                        model.Id(p => p.EmployeesId);
                                        model.Field(p => p.Empleado.IdEmpleado).Editable(false);
                                        model.Field(p => p.Empleado.NombreEmpleado).Editable(false);
                                        model.Field(p => p.Dia1TA).DefaultValue(1);
                                        model.Field(p => p.LetraD1);
                                        model.Field(p => p.Dia2TA).DefaultValue(1);
                                        model.Field(p => p.LetraD2);
                                        model.Field(p => p.Dia3TA).DefaultValue(1);
                                        model.Field(p => p.LetraD3);
                                        model.Field(p => p.Dia4TA).DefaultValue(1);
                                        model.Field(p => p.LetraD4);
                                        model.Field(p => p.Dia5TA).DefaultValue(1);
                                        model.Field(p => p.LetraD5);
                                        model.Field(p => p.Dia6TA).DefaultValue(1);
                                        model.Field(p => p.LetraD6);
                                        model.Field(p => p.Dia7TA).DefaultValue(1);
                                        model.Field(p => p.LetraD7);
                                        model.Field(p => p.Dia8TA).DefaultValue(1);
                                        model.Field(p => p.LetraD8);
                                        model.Field(p => p.Dia9TA).DefaultValue(1);
                                        model.Field(p => p.LetraD9);
                                        model.Field(p => p.Dia10TA).DefaultValue(1);
                                        model.Field(p => p.LetraD10);
                                        model.Field(p => p.Dia11TA).DefaultValue(1);
                                        model.Field(p => p.LetraD11);
                                        model.Field(p => p.Dia12TA).DefaultValue(1);
                                        model.Field(p => p.LetraD12);
                                        model.Field(p => p.Dia13TA).DefaultValue(1);
                                        model.Field(p => p.LetraD13);
                                        model.Field(p => p.Dia14TA).DefaultValue(1);
                                        model.Field(p => p.LetraD14);
                                        model.Field(p => p.Dia15TA).DefaultValue(1);
                                        model.Field(p => p.LetraD15);
                                        model.Field(p => p.Dia16TA).DefaultValue(1);
                                        model.Field(p => p.LetraD16);
                                        model.Field(p => p.Dia17TA).DefaultValue(1);
                                        model.Field(p => p.LetraD17);
                                        model.Field(p => p.Dia18TA).DefaultValue(1);
                                        model.Field(p => p.LetraD18);
                                        model.Field(p => p.Dia19TA).DefaultValue(1);
                                        model.Field(p => p.LetraD19);
                                        model.Field(p => p.Dia20TA).DefaultValue(1);
                                        model.Field(p => p.LetraD20);
                                        model.Field(p => p.Dia21TA).DefaultValue(1);
                                        model.Field(p => p.LetraD21);
                                        model.Field(p => p.Dia22TA).DefaultValue(1);
                                        model.Field(p => p.LetraD22);
                                        model.Field(p => p.Dia23TA).DefaultValue(1);    
                                        model.Field(p => p.LetraD23);
                                        model.Field(p => p.Dia24TA).DefaultValue(1);
                                        model.Field(p => p.LetraD24);
                                        model.Field(p => p.Dia25TA).DefaultValue(1);
                                        model.Field(p => p.LetraD25);
                                        model.Field(p => p.Dia26TA).DefaultValue(1);
                                        model.Field(p => p.LetraD26);
                                        model.Field(p => p.Dia27TA).DefaultValue(1);
                                        model.Field(p => p.LetraD27);
                                        model.Field(p => p.Dia28TA).DefaultValue(1);
                                        model.Field(p => p.LetraD28);
                                        model.Field(p => p.Dia29TA).DefaultValue(1);
                                        model.Field(p => p.LetraD29);
                                        model.Field(p => p.Dia30TA).DefaultValue(1);
                                        model.Field(p => p.LetraD30);
                                        model.Field(p => p.Dia31TA).DefaultValue(1);
                                        //model.Field(p => p.LetraD31);
                                        //model.Field(p => p.Dia2).Editable(true);
                                        //model.Field(p => p.Dia3).Editable(true);
                                        //model.Field(p => p.Dia4).Editable(true);
                                        //model.Field(p => p.Dia5).Editable(true);
                                        //model.Field(p => p.Dia6).Editable(true);
                                        //model.Field(p => p.Dia7).Editable(true);
                                        //model.Field(p => p.Dia8).Editable(true);
                                        //model.Field(p => p.Dia9).Editable(true);
                                        //model.Field(p => p.Dia10).Editable(true);
                                        //model.Field(p => p.Dia11).Editable(true);
                                        //model.Field(p => p.Dia12).Editable(true);
                                        //model.Field(p => p.Dia13).Editable(true);
                                        //model.Field(p => p.Dia14).Editable(true);
                                        //model.Field(p => p.Dia15).Editable(true);
                                        //model.Field(p => p.Dia16).Editable(true);
                                        //model.Field(p => p.Dia17).Editable(true);
                                        //model.Field(p => p.Dia18).Editable(true);
                                        //model.Field(p => p.Dia19).Editable(true);
                                        //model.Field(p => p.Dia20).Editable(true);
                                        //model.Field(p => p.Dia21).Editable(true);
                                        //model.Field(p => p.Dia22).Editable(true);
                                        //model.Field(p => p.Dia23).Editable(true);
                                        //model.Field(p => p.Dia24).Editable(true);
                                        //model.Field(p => p.Dia25).Editable(true);
                                        //model.Field(p => p.Dia26).Editable(true);
                                        //model.Field(p => p.Dia27).Editable(true);
                                        //model.Field(p => p.Dia28).Editable(true);
                                        //model.Field(p => p.Dia29).Editable(true);
                                        //model.Field(p => p.Dia30).Editable(true);
                                        //model.Field(p => p.Dia31).Editable(true);
                                        model.Field(p => p.LlegadasTarde).Editable(false);
                                        model.Field(p => p.DiasLaborales).Editable(false);
                                        model.Field(p => p.PorcentajeLlegadasTarde).Editable(false);

                                        // model.Field(p => p.TipoAsistencia).DefaultValue(ViewData["defaultTipo"] as ERPMVC.Models.ControlAsistencias);

                                        //{
                                        //    var dias =  model.Field(p =>  p.Dia27) + model.Field(p => p.Dia28); ;
                                        //}


                                        model.Field(p => p.FechaCreacion).Editable(true);
                                        model.Field(p => p.UsuarioCreacion).Editable(false);
                                        model.Field(p => p.UsuarioModificacion).Editable(false);

                                    })
                                    .Events(events => events.Error("error_handler"))
                                    .Read(read => read.Action("", "ControlAsistencias"))
                                //   .Read(read => read.Action("GetGetControlAsistencias", "ControlAsistencias"))
                                //.Read(read => read.Action("GetControlAsistencias", "ControlAsistencias"))
                                //.Create(create => create.Action("PostControlAsistencias", "ControlAsistencias"))
                                .Update(update => update.Action("PostControlAsistencias", "ControlAsistencias", new { Id = "{0}"}).Type(HttpVerbs.Post))

                                //.Update(update => update.Action("PostControlAsistencias", "ControlAsistencias", new { Id = "{0}" }))
                                //.Update(update => update.Action("PostControlAsistencias", "ControlAsistencias", new { Id = "{0}" }))
                                // .Update(update => update.Action("PostControlAsistenciasS", "ControlAsistencias", new { ExchangeRateId = "{0}" }).Type(HttpVerbs.Put))
                                //.Update(update => update.Action("Update", "ControlAsistencias", new { Id = "{0}" }).Type(HttpVerbs.Put))
                                //.Destroy(destroy => destroy.Action("Delete", "Estados", new { IdEstado = "{0}" }).Type(HttpVerbs.Delete))

                                )
                                .Events(e =>
                                {
                                    e.Save("onsave");

                                })
)

@*<div id="NumEstados">
        @await Html.PartialAsync("AddControlAsistencia", new ERPMVC.DTO.ControlAsistenciasDTO { Id = 0 })
    </div>*@



