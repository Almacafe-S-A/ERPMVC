@model ERPMVC.DTO.InsurancesCertificateDTO



<script>


   /* function GetSalesOrderId() {
        var subproductname = '', unidaddemedida = '';
        if ($("#UnitMeasureId") != null) {
            if ($("#UnitMeasureId").data("kendoDropDownList") != null) {
                unidaddemedida = $("#UnitMeasureId").data("kendoDropDownList").text();
            }
        }
        if ($("#SubProductId") != null) {
            if ($("#SubProductId").data("kendoDropDownList") != null) {
                subproductname = $("#SubProductId").data("kendoDropDownList").text();
            }
        }


        var displayedData = $("#gridCertificadoDepositoDetail").data().kendoGrid.dataSource.data();
        var id = -999999;
       // debugger;
        if (Number($("#CertificadoLineId").val()) === 0) {
            if (displayedData.length > 0) {
                for (var i = 0; i < displayedData.length; i++) {
                    //console.log('Linea:' + displayedData[i].CertificadoLineId);
                    //console.log('Linea:' + id);
                    if (displayedData[i].CertificadoLineId > id)
                        id = displayedData[i].CertificadoLineId ;

                }

                id = id + 1;
            }
            //else {
            //    id = 1;
            //}
        }
        else {
            id = $("#CertificadoLineId").val();
        }


            return {
            */
                @*'IdCD': @Model.IdCD,
                'UnitOfMeasureId' : $("#UnitOfMeasureId").val(),
                'UnitOfMeasureName': unidaddemedida,
                'SubProductId': $("#SubProductId").val(),
                'SubProductName': subproductname,
                'Description': $("#DescriptionDetail").val(),
                'Quantity': $("#Quantity").val(),
                'Price': $("#Price").val(),
                'Amount': $("#AmountLine").val(),
                'DiscountPercentage': $("#DiscountPercentage").val(),
                'DiscountAmount': $("#DiscountAmount").val(),
                'SubTotal': $("#SubTotalLine").val(),
                'TaxPercentage': $("#TaxPercentage").val(),
                'TaxAmount': $("#TaxAmount").val(),
                'Total': $("#TotalLine").val(),*@

    @* 'CertificadoLineId': id,
                'IdCD': @Model.IdCD,
                'uid': $("#uid").val(),
                'SubProductId': $("#SubProductId").val(),
                'SubProductName': subproductname,
                'Description': $("#DescriptionDetail").val(),
                'Quantity': $("#Quantity").val(),
                'Price': $("#Price").val(),
                'Amount': $("#AmountLine").val(),
                'UnitMeasureId': $("#UnitMeasureId").val(),
                'UnitMeasurName': unidaddemedida,
                'TotalCantidad': $("#TotalCantidad").val(),
                'ValorImpuestos': $("#ValorImpuestos").val(),


            }
        }

    function RefreshCertificadoDepositoDetail() {
        var grid = $("#gridCertificadoDepositoDetail").getKendoGrid();
        grid.dataSource.read();
        grid.refresh();
        //CalcularTotalDocumento();
    }

         *@
   
     @*
    function EditCotizacionDetalle(e) {
        if ($("#ServicioId").val() !== '' && $("#ServicioId").val() !== '0') {
            e.preventDefault();
            var notification = $("#notification").data("kendoNotification");
            var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
            //console.log(dataItem);
          //  debugger;
            var subproducto = 0;
            var dataObject = { 'CertificadoLineId': dataItem.CertificadoLineId };
            if (dataItem.IdCD > 0) {
                $.ajax({
                    url: '@Url.Action("pvwCertificadoDepositoDetailMant", "CertificadoLine")',
                    method: 'GET',
                    //datatype: "json",
                    contentType: 'application/json',
                    async: false,
                    //data: JSON.stringify(dataObject),
                    data: (dataObject),
                    success: function (data) {
                        $("#SalesOrderLineMant").html('');
                        $("#SalesOrderLineMant").html(data);
                        var txt = $(data);
                        var found = $("#SubProductId", txt);
                        subproducto = $(found).val();
                    },
                    error: function (XMLHttpRequest, textStatus, errorThrown) {

                        //  $("#btngenerarfactura").show();
                        notification.show({
                            title: "Validacion",
                            message: textStatus + ": " + XMLHttpRequest.responseText
                        }, "error");

                    }
                });

                hcustom = $("#CustomerId").val();
                $("#frmCertificadoDepositoLine :input").prop("disabled", true);
             //   llenarsubproduct();
                var combobox = $('#SubProductId').getKendoDropDownList();
                combobox.value(subproducto);
                combobox.trigger('change');

            }
            else {
                $("#CertificadoLineId").val(dataItem.CertificadoLineId);
                $("#IdCD").val(0);
                $("#DescriptionDetail").val(dataItem.Description);
                var quantity = $("#Quantity").data("kendoNumericTextBox");
                quantity.value(dataItem.Quantity);
                quantity.trigger('change');

                var Price = $("#Price").data("kendoNumericTextBox");
                Price.value(dataItem.Price);
                Price.trigger('change');

                var Amount = $("#AmountLine").data("kendoNumericTextBox");
                Amount.value(dataItem.Amount);
                Amount.trigger('change');

                if ($("#ProductId").val() == 2) {
                    $("#divvalorimpuesto").css("display", "block");
                }
                else {
                    $("#divvalorimpuesto").css("display", "none");
                }

                $("#UnitMeasureId").data("kendoDropDownList").value(dataItem.UnitMeasureId);

                $("#SubProductId").data("kendoDropDownList").dataSource.read();
                $("#SubProductId").data("kendoDropDownList").value(dataItem.SubProductId);
                $("#UnitMeasureId").data("kendoDropDownList").value(dataItem.UnitMeasureId);

                //var combobox = $('#CustomerId').getKendoDropDownList();
                //combobox.value($('#CustomerId').val());
                //combobox.trigger('change');
                //combobox.dataSource.read();
               // llenarsubproduct();
            }

            if ($("#ServicioId").val() == 2) {
                changeServicio();
            }

            $('#myModalCertificadoDepositoLine').modal('show');
        }
        else {
            var notification = $("#notification").data("kendoNotification");
            notification.show({
                title: "Validacion",
                message: "Debe seleccionar un producto!"
            }, "error");

        }



    }
         *@

  
</script>





   


<script>
</script>