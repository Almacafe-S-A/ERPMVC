<h3 class="text-themecolor">Revisión y Aprobación de Horas Extra</h3>
<div class="container-fluid">
    <div class="row">
        <div class="col">
            <div class="row">
                
            </div>
            <div class="row">
                <h4>Pagos y saldos de ISR para el periodo</h4>
                <div id="grdConfiguracion"></div>
            </div>
        </div>
    </div>
</div>

<script>
    function CrearGrid() {
        $("#grdConfiguracion").kendoGrid({
            dataSource: {
                transport: {
                    read: {
                        url: "@Url.Action("GetPagosISRPeriodo", "DeduccionEmpleado")",
                        data: {
                            periodo: @DateTime.Today.Year,
                            mes:@DateTime.Today.Month
                        }
                    }
                },
                schema: {
                    model: {
                        id: "Id",
                        fields: {
                            Id: { type: "number", editable: false },
                            Periodo: { type: "number", editable: false },
                            Empleado: { defaultValue: { IdEmpleado: 0, NombreEmpleado: '' }, editable: false },
                            Estado: { defaultValue: { IdEstado: 0, NombreEstado: "" }, editable: false },
                            TotalAnual: { type: "number", editable: false },
                            Saldo: { type: "number", editable: false },
                            PagoAcumulado: { type: "number", editable: true },
                            CuotaISR: { type: "number", editable: false }
                        }
                    }
                }
            },
            columns: [
                {
                    command: [
                        { name: "edit", text: { edit: "", update: "", cancel: "" } }
                        //{ name: "aprobar", iconClass: "fa fa-thumbs-up", text: "", click: Aprobar, visible: function (dataItem) {return dataItem.Estado.IdEstado === 70 } },
                        //{ name: "rechazar", iconClass: "fa fa-thumbs-down", text: "", click: Rechazar, visible: function (dataItem) { return dataItem.Estado.IdEstado === 70 } }
                    ],
                    width:50
                },
                { field: "Id", title: "Id. ", width: 80, hidden: true },
                { field: "Periodo",title:"Periodo", width:80},
                { field: "Empleado", title: "Empleado", width: 200, template: '#= Empleado.NombreEmpleado #' },
                { field: "TotalAnual", title: "Total Anual", width: 100, format: "{0:#,##0.00}", template: '<div style="text-align:right;">#= kendo.toString(TotalAnual, "n2") #</div>'},
                { field: "PagoAcumulado", title: "Pagado", width: 100, editor: editorNumerico, format: "{0:#,##0.00}", template: '<div style="text-align:right;">#= kendo.toString(PagoAcumulado, "n2") #</div>' },
                { field: "Saldo", title: "Saldo", width: 100, format: "{0:#,##0.00}", template: '<div style="text-align:right;">#= kendo.toString(Saldo, "n2") #</div>' },
                { field: "CuotaISR", title: "ISR Mes", width: 100, format: "{0:#,##0.00}", template: '<div style="text-align:right;">#= kendo.toString(CuotaISR, "n2") #</div>' },
                { field: "Estado", title: "Estado", width: 100, template: "#= Estado.NombreEstado #", hidden:true}
            ],
            noRecords: {
                template:"No hay datos de pagos del ISR"
            },
            //height: 400,
            scrollable: true,
            editable: "inline"
        });
    }

    function editorNumerico(contenedor, opciones) {
        $('<input data-bind="value:' + opciones.field + '"/>')
            .appendTo(contenedor)
            .kendoNumericTextBox({ spinners: false });
    }

    $(document).ready(function() {
        CrearGrid();
    });
</script>